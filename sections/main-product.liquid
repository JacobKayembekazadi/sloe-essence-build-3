{% comment %}
  Product template for individual product pages
{% endcomment %}

<section id="ProductSection-{{ section.id }}" data-section="{{ section.id }}">
  <div class="page-width">
    <div class="product">
      <div class="product__media-wrapper">
        <div class="product__media">
          {%- for media in product.media -%}
            <div class="product__media-item">
              {%- if media.media_type == 'image' -%}
                <img
                  src="{{ media | image_url: width: 800 }}"
                  alt="{{ media.alt | escape }}"
                  width="800"
                  height="auto"
                  loading="{% if forloop.index == 1 %}eager{% else %}lazy{% endif %}"
                >
              {%- endif -%}
            </div>
          {%- endfor -%}
        </div>
      </div>

      <div class="product__info-wrapper">
        <div class="product__info">
          {%- if product.vendor != blank and section.settings.show_vendor -%}
            <div class="product__vendor">
              {{ product.vendor }}
            </div>
          {%- endif -%}

          <h1 class="product__title">
            {{ product.title | escape }}
          </h1>

          <div class="product__price">
            <div class="price price--large">
              {{ product.selected_or_first_available_variant.price | money }}
              {%- if product.selected_or_first_available_variant.compare_at_price > product.selected_or_first_available_variant.price -%}
                <span class="price__compare">
                  {{ product.selected_or_first_available_variant.compare_at_price | money }}
                </span>
              {%- endif -%}
            </div>
          </div>

          {%- if product.description != blank -%}
            <div class="product__description rte">
              {{ product.description }}
            </div>
          {%- endif -%}

          <product-form class="product-form">
            <form action="{{ routes.cart_add_url }}" method="post" enctype="multipart/form-data" id="product-form-{{ section.id }}" class="form" novalidate="novalidate" data-type="add-to-cart-form">
              <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
              
              {%- unless product.has_only_default_variant -%}
                {%- for option in product.options_with_values -%}
                  <fieldset class="product-form__input">
                    <legend class="form__label">{{ option.name }}</legend>
                    {%- for value in option.values -%}
                      <input type="radio" id="{{ section.id }}-{{ option.position }}-{{ forloop.index0 }}"
                             name="options[{{ option.name | escape }}]"
                             value="{{ value | escape }}"
                             form="{{ product_form_id }}"
                             {% if option.selected_value == value %}checked{% endif %}>
                      <label for="{{ section.id }}-{{ option.position }}-{{ forloop.index0 }}">
                        {{ value }}
                      </label>
                    {%- endfor -%}
                  </fieldset>
                {%- endfor -%}
              {%- endunless -%}

              <div class="product-form__quantity">
                <label class="form__label" for="Quantity-{{ section.id }}">
                  {{ 'products.product.quantity.label' | t }}
                </label>
                <quantity-input class="quantity">
                  <button class="quantity__button no-js-hidden" name="minus" type="button">
                    <span class="visually-hidden">{{ 'products.product.quantity.decrease' | t: product: product.title | escape }}</span>
                    <svg viewBox="0 0 10 2" aria-hidden="true" focusable="false">
                      <path d="m1 1h8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                  </button>
                  <input class="quantity__input"
                    type="number"
                    id="Quantity-{{ section.id }}"
                    name="quantity"
                    value="1"
                    min="1"
                    form="{{ product_form_id }}"
                    data-quantity-variant-id="{{ product.selected_or_first_available_variant.id }}"
                  >
                  <button class="quantity__button no-js-hidden" name="plus" type="button">
                    <span class="visually-hidden">{{ 'products.product.quantity.increase' | t: product: product.title | escape }}</span>
                    <svg viewBox="0 0 10 10" aria-hidden="true" focusable="false">
                      <path d="M5 1v8M1 5h8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                  </button>
                </quantity-input>
              </div>

              <div class="product-form__buttons">
                <button
                  type="submit"
                  name="add"
                  class="product-form__cart-submit button button--full-width"
                  {% if product.selected_or_first_available_variant.available == false %}disabled{% endif %}
                >
                  <span>
                    {%- if product.selected_or_first_available_variant.available -%}
                      {{ 'products.product.add_to_cart' | t }}
                    {%- else -%}
                      {{ 'products.product.sold_out' | t }}
                    {%- endif -%}
                  </span>
                </button>
              </div>
            </form>
          </product-form>
        </div>
      </div>
    </div>
  </div>
</section>

{% stylesheet 'section-main-product.css' | asset_url | stylesheet_tag %}

{% schema %}
{
  "name": "Main Product",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_vendor",
      "label": "Show vendor",
      "default": true
    }
  ]
}
{% endschema %}
